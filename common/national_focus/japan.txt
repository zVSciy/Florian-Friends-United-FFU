#!gfx:interface\lw_goals.gfx
#!gfx:interface\KR_goals.gfx
#!gfx:interface\cic_goals.gfx
#!gfx:interface\snek_teleport.gfx
#!gfx:interface\replace\bruh_interface.gfx
#!gfx:interface\replace\bruh_bra_interface.gfx
#!gfx:interface\replace\bruh_eng_interface.gfx
#!gfx:interface\replace\bruh_ger_interface.gfx
#!gfx:interface\replace\bruh_hol_interface.gfx
#!gfx:interface\replace\bruh_ita_interface.gfx
#!gfx:interface\replace\bruh_jap_interface.gfx
#!gfx:interface\replace\bruh_nsb_interface.gfx
#!gfx:interface\replace\bruh_sov_interface.gfx

focus_tree = {
	id = japan_wtt_focus
	
	country = {
		factor = 0
		modifier = {
			add = 20
			tag = JAP
		}
	}
	

	default = no

	continuous_focus_position = { x = 2500 y = 700 }

	focus = {
		id = JAP_arrest_the_traitors
		icon = GFX_goal_generic_major_war
		mutually_exclusive = { focus = JAP_support_the_kodoha_faction }
		x = 5
		y = 0

		cost = 8

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
		completion_reward = {
			swap_ideas = {
				add_idea = JAP_toseiha
				remove_idea = JAP_radical_ija
			}
		}
	}
	
	focus = {
		id = JAP_purge_the_kodoha_faction
		icon = GFX_goal_tfv_saf_anti_colonialist_crusade
		prerequisite = { focus = JAP_arrest_the_traitors }
		x = 0
		y = 1
		relative_position_id = JAP_arrest_the_traitors

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_gekokoju2
			# 	remove_idea = JAP_gekokoju
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_planning_speed = 0.25 tooltip = planning_speed_tt }
			add_to_variable = { JAP_japanese_army_max_planning = 0.15 tooltip = max_planning_tt }
			add_to_variable = { JAP_japanese_army_max_dig_in = 2.5 tooltip = max_dig_in_tt }
			add_popularity = {
				ideology = fascism
				popularity = 0.1
			}
			set_party_name = { 
			    ideology = fascism
			    long_name = JAP_fascism_party_tosheiha_long 
			    name = JAP_fascism_party_tosheiha
			}
		}
	}
	
	focus = {
		id = JAP_control
		icon = GFX_Japanese_Unity
		prerequisite = { focus = JAP_purge_the_kodoha_faction }
		x = -4
		y = 1
		relative_position_id = JAP_purge_the_kodoha_faction

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			add_popularity = {
				ideology = fascism
				popularity = 0.3
			}
		}
	}
	
	focus = {
		id = JAP_combat_militarism
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = JAP_control }
		x = 1
		y = 1
		relative_position_id = JAP_control

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_militarism_showa
			# 	remove_idea = JAP_militarism
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_army_morale_factor = -0.05 tooltip = army_morale_factor_tt }
			add_to_variable = { JAP_japanese_army_war_support_factor = -0.1 tooltip = war_support_factor_tt }
			add_to_variable = { JAP_japanese_army_research_speed_factor = 0.05 tooltip = research_speed_factor_tt }
			add_to_variable = { JAP_japanese_army_justify_war_goal_time = 0.1 tooltip = justify_war_goal_time_tt }
			add_to_variable = { JAP_japanese_army_mobilization_laws_cost_factor = 0.1 tooltip = mobilization_laws_cost_factor_tt }
			JAP_economy_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_economy_production_speed_industrial_complex_factor = 0.2 tooltip = production_speed_industrial_complex_factor_tt }
		}
	}
	
	focus = {
		id = JAP_combat_gekokoju
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = JAP_combat_militarism }
		x = 0
		y = 1
		relative_position_id = JAP_combat_militarism

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			# remove_ideas = JAP_gekokoju2
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_planning_speed = 0.25 tooltip = planning_speed_tt }
			add_to_variable = { JAP_japanese_army_max_planning = 0.1 tooltip = max_planning_tt }
			add_to_variable = { JAP_japanese_army_max_dig_in = 2.5 tooltip = max_dig_in_tt }
		}
	}
	
	focus = {
		id = JAP_control_the_army
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = JAP_control }
		x = -1
		y = 1
		relative_position_id = JAP_control

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_toseiha2
			# 	remove_idea = JAP_toseiha
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_high_command_cost_factor = -0.25 tooltip = high_command_cost_factor_tt }
			add_to_variable = { JAP_japanese_army_army_chief_cost_factor = -0.25 tooltip = army_chief_cost_factor_tt }
		}
	}
	
	focus = {
		id = JAP_technlogical_supremacy
		icon = GFX_goal_generic_scientific_exchange
		prerequisite = { focus = JAP_control_the_army }
		x = 0
		y = 1
		relative_position_id = JAP_control_the_army

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			hidden_effect = {
				add_ideas = JAP_supremacy_of_technology
			}
			JAP_army_dynamic_modifier_tt = yes # tooltip
			custom_effect_tooltip = JAP_supremacy_of_technology_5_tt
		}
	}
	
	focus = {
		id = JAP_appoint_tojo
		icon = GFX_focus_generic_strike_at_democracy2
		prerequisite = { focus = JAP_technlogical_supremacy }
		prerequisite = { focus = JAP_combat_gekokoju }
		x = -1
		y = 1
		relative_position_id = JAP_combat_gekokoju

		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		completion_reward = {
			add_country_leader_role = {
				character = "JAP_hideki_tojo"
				country_leader = {
					ideology = fascism_ideology
					expire = "1989.1.1"
					traits = { 
						tojo 
					}
				}
				promote_leader = yes 
			}
		}
	}

	focus = {
		id = JAP_support_the_kodoha_faction
		icon = GFX_goal_generic_military_deal
		mutually_exclusive = { focus = JAP_arrest_the_traitors }
		x = 9
		y = 0

		cost = 8

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			swap_ideas = {
				add_idea = JAP_kodoha
				remove_idea = JAP_radical_ija
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.2
			}
			hidden_effect = { news_event = { id = wtt_news.27 hours = 6 } }
		}
	}
	
	focus = {
		id = JAP_revere_the_emperor
		icon = GFX_focus_hol_the_foundations_of_defense
		prerequisite = { focus = JAP_support_the_kodoha_faction }
		x = 0
		y = 1
		relative_position_id = JAP_support_the_kodoha_faction

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_stability = 0.1
			add_war_support = 0.2
		}
	}
	
	focus = {
		id = JAP_the_imperial_way
		icon = GFX_focus_jap_pacific_guardian
		prerequisite = { focus = JAP_revere_the_emperor }
		x = 4
		y = 1
		relative_position_id = JAP_revere_the_emperor

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_stability = 0.1
			add_popularity = {
				ideology = fascism
				popularity = 0.2
			}
			swap_ideas = {
				add_idea = JAP_kodoha2
				remove_idea = JAP_kodoha
			}
		}
	}
	
	focus = {
		id = JAP_reject_science
		icon = GFX_Japanese_Glory
		prerequisite = { focus = JAP_the_imperial_way }
		x = -1
		y = 1
		relative_position_id = JAP_the_imperial_way

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_militarism_shogunate
			# 	remove_idea = JAP_militarism
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_army_morale_factor = 0.05 tooltip = army_morale_factor_tt }
			add_to_variable = { JAP_japanese_army_war_support_factor = 0.1 tooltip = war_support_factor_tt }
			add_to_variable = { JAP_japanese_army_research_speed_factor = -0.05 tooltip = research_speed_factor_tt }
			add_to_variable = { JAP_japanese_army_mobilization_laws_cost_factor = -0.10 tooltip = mobilization_laws_cost_factor_tt }
			JAP_economy_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.05 tooltip = production_speed_arms_factory_factor_tt }
		}
	}
	
	focus = {
		id = JAP_purge_the_bureaucracy
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = JAP_reject_science }
		x = 0
		y = 1
		relative_position_id = JAP_reject_science

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_popularity = {
				ideology = fascism
				popularity = 0.2
			}
			add_timed_idea = { idea = JAP_purged_bureaucracy days = 365 }
		}
	}
	
	focus = {
		id = JAP_curb_the_young_officers
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = JAP_the_imperial_way }
		x = 1
		y = 1
		relative_position_id = JAP_the_imperial_way

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_gekokoju2
			# 	remove_idea = JAP_gekokoju
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_planning_speed = 0.25 tooltip = planning_speed_tt }
			add_to_variable = { JAP_japanese_army_max_planning = 0.15 tooltip = max_planning_tt }
			add_to_variable = { JAP_japanese_army_max_dig_in = 2.5 tooltip = max_dig_in_tt }
		}
	}
	
	focus = {
		id = JAP_shinto_reform
		icon = GFX_focus_jap_spiritual_mobilization
		prerequisite = { focus = JAP_curb_the_young_officers }
		x = 2
		y = 1
		relative_position_id = JAP_curb_the_young_officers

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# add_ideas = state_shintoism
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_conscription = 0.02 tooltip = conscription_tt }
			add_to_variable = { JAP_japanese_army_experience_gain_army = -0.10 tooltip = resistance_target_tt }
		}
	}
	
	focus = {
		id = JAP_purge_the_choshu
		icon = GFX_Japanese_Combined
		prerequisite = { focus = JAP_shinto_reform }
		x = 0
		y = 1
		relative_position_id = JAP_shinto_reform

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# remove_ideas = JAP_gekokoju2
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_planning_speed = 0.25 tooltip = planning_speed_tt }
			add_to_variable = { JAP_japanese_army_max_planning = 0.1 tooltip = max_planning_tt }
			add_to_variable = { JAP_japanese_army_max_dig_in = 2.5 tooltip = max_dig_in_tt }
		}
	}
	
	focus = {
		id = JAP_samurai_legacy
		icon = GFX_focus_generic_japanese_imperial_glory
		prerequisite = { focus = JAP_purge_the_choshu }
		x = 0
		y = 1
		relative_position_id = JAP_purge_the_choshu

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_bushido_spirit2
			# 	remove_idea = JAP_bushido_spirit
			# }
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_training_time_army_factor = 0.40 tooltip = training_time_army_factor_tt }
			add_to_variable = { JAP_japanese_army_attrition = -0.05 tooltip = attrition_tt }
			add_to_variable = { JAP_japanese_army_supply_consumption_factor = -0.05 tooltip = supply_consumption_factor_tt }
			add_to_variable = { JAP_japanese_army_experience_loss_factor = -0.1 tooltip = experience_loss_factor_tt }
			add_to_variable = { JAP_japanese_army_no_supply_grace = 24 tooltip = no_supply_grace_tt }
			add_to_variable = { JAP_japanese_army_minimum_training_level = 0.05 tooltip = minimum_training_level_tt }
			custom_effect_tooltip = insert_extra_line_here
			every_army_leader = {
				limit = {  has_trait = JAP_samurai_lineage }  
				remove_unit_leader_trait = JAP_samurai_lineage
				add_unit_leader_trait = JAP_samurai_revived
			}
		}
	}
	
	focus = {
		id = JAP_military_government
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = JAP_curb_the_young_officers }
		x = 0
		y = 1
		relative_position_id = JAP_curb_the_young_officers

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			# add_ideas = JAP_mil_government
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_experience_gain_army = 0.05 tooltip = experience_gain_army_tt }
			add_to_variable = { JAP_japanese_army_military_leader_cost_factor = -0.50 tooltip = military_leader_cost_factor_tt }
			add_to_variable = { JAP_japanese_army_political_advisor_cost_factor = 0.25 tooltip = political_advisor_cost_factor_tt }
		}
	}
	
	focus = {
		id = JAP_showa_restoration
		icon = GFX_focus_jap_showa_restoration
		prerequisite = { focus = JAP_military_government }
		prerequisite = { focus = JAP_purge_the_bureaucracy }
		x = -1
		y = 1
		relative_position_id = JAP_military_government

		cost = 5

		available = {

		}

		bypass = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			create_country_leader = {
				name = "Hirohito"
				desc = "POLITICS_Hirohito_DESC"
				picture = "Portrait_Japan_Hirohito.dds"
				expire = "1989.1.1"
				ideology = fascism_ideology
				traits = {
					emperor_showa
				}
				id = 700 #Hirohito
			}
			remove_ideas = JAP_hirohito
		}
	}
	
	focus = {
		id = JAP_national_mobilization_law
		icon = GFX_goal_generic_axis_build_infantry
		prerequisite = { focus = JAP_purge_the_kodoha_faction focus = JAP_revere_the_emperor }
		x = 2
		y = 1
		relative_position_id = JAP_purge_the_kodoha_faction

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			if = {
				limit = {	
					has_war_support < 0.5
				}
				add_war_support = 0.1
			}
			else_if = {
				limit = {
					has_idea = war_economy
				}
				add_political_power = 150
			}
			else = {
				add_ideas = war_economy
			}
		}
	}

	focus = {
		id = JAP_nation_defence_state
		icon = GFX_goal_generic_build_tank
		prerequisite = { focus = JAP_national_mobilization_law }
		x = -2
		y = 1
		relative_position_id = JAP_national_mobilization_law

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = JAP_takuo_godo
			add_political_power = 100
		}
	}
	
	focus = {
		id = JAP_kokura_arsenal
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = JAP_nation_defence_state }
		x = 0
		y = 1
		relative_position_id = JAP_nation_defence_state

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}					
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}					
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}					
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_spiritual_mobilisation
		icon = GFX_goal_JAP_PAR
		prerequisite = { focus = JAP_national_mobilization_law }
		x = 0
		y = 1
		relative_position_id = JAP_national_mobilization_law

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_stability = 0.1
			add_war_support = 0.1
		}
	}
	
	focus = {
		id = JAP_austerity
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = JAP_spiritual_mobilisation }
		x = 0
		y = 1
		relative_position_id = JAP_spiritual_mobilisation

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			# add_ideas = JAP_austerity_idea
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.09 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_navy_fuel_consumption_factor = -0.1 tooltip = navy_fuel_consumption_factor_tt }
			add_to_variable = { JAP_japanese_economy_air_fuel_consumption_factor = -0.1 tooltip = air_fuel_consumption_factor_tt }
		}
	}
	
	focus = {
		id = JAP_war_ministry
		icon = GFX_Japan_Army
		prerequisite = { focus = JAP_national_mobilization_law }
		x = 2
		y = 1
		relative_position_id = JAP_national_mobilization_law

		cost = 5

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			army_experience = 25
		}
	}
	
	focus = {
		id = JAP_prepare_expansion
		icon = GFX_focus_jap_prepare_for_expansion
		prerequisite = { focus = JAP_war_ministry }
		x = 0
		y = 1
		relative_position_id = JAP_war_ministry

		cost = 5
		
		available = {
			609 = {
				CONTROLLER = {
					OR = {
						tag = JAP
						is_subject_of = JAP
					}
				}
			}
			745 = {
				CONTROLLER = {
					OR = {
						tag = JAP
						is_subject_of = JAP
					}
				}
			}
		}

		ai_will_do = {
			factor = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			745 = {
				add_building_construction = {
					type = naval_base
					level = 2
					province = 1150
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			609 = {
				add_building_construction = {
					type = naval_base
					level = 3
					province = 3900
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_liaison_conference
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = JAP_prepare_expansion }
		prerequisite = { focus = JAP_austerity }
		prerequisite = { focus = JAP_kokura_arsenal }
		x = 0
		y = 1
		relative_position_id = JAP_austerity

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = DISABLED
					}
					NOT = {
						has_global_flag = JAP_liaison_conference_happened_manchu
					}
				}
				set_global_flag = JAP_liaison_conference_happened_manchu
				MAN = {
					country_event = wtt_manchukou.12
				}
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				MAN = {
					country_event = wtt_manchukou.12
				}
			}
			
			every_army_leader = {
				add_planning = 1
				add_logistics = 1
			}
			# add_ideas = JAP_liaison_conference
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_army_leader_start_planning_level = 1 tooltip = army_leader_start_planning_level_tt }
		}
	}
	
	focus = {
		id = JAP_intervene_in_china
		icon = GFX_JAP_conquest #GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = JAP_liaison_conference }
		will_lead_to_war_with = CHI
		x = 0
		y = 1
		relative_position_id = JAP_liaison_conference
		dynamic = yes

		cost = 1

		available = { 
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				NOT = { has_war_with = CHI }
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = DISABLED
					}
				}
				date > 1937.7.1
			}
		}
		
		bypass = {
			has_global_flag = HOST_SSJW_START
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				OR = {
					AND = {
						608 = {
							NOT = {
								is_controlled_by = CHI
							}
						}
						597 = {
							NOT = {
								is_controlled_by = CHI
							}
						}
						614 = {
							NOT = {
								is_controlled_by = CHI
							}
						}
					}
					has_war_with = CHI
				}
			}
			else = {
				always = no
			}
		}

		will_lead_to_war_with = CHI

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				date < 1937.1.1
			}
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				hidden_effect = {
					ENG = {
						set_rule = { 
							can_send_volunteers = no
						}
					}
					
					if = {
						limit = {
							has_game_rule = {
								rule = usa_volunteers_in_china
								option = ENABLED
							}
						}
						SOV = {
							swap_ideas = {
								remove_idea = volunteer_minimum_major
								add_idea = volunteer_minimum_minor
							}
						}
						
						USA = {
							add_ideas = volunteer_minimum_minor
							set_rule = { 
								can_send_volunteers = yes
							}
						}

						ENG = {
							set_rule = { 
								can_send_volunteers = yes
							}
						}

						ENG = {
							swap_ideas = {
								remove_idea = volunteer_minimum_major
								add_idea = volunteer_minimum_minor
							}
						}
					}
					hidden_effect = {
						country_event = { days = 5 id = news.1 }
						ROM = {
							diplomatic_relation = {
								country = JAP
								relation = military_access
								active = yes
							}
						}
				
						BUL = {
							diplomatic_relation = {
								country = JAP
								relation = military_access
								active = yes
							}
						}
					}
					USA = { set_country_flag = { flag = USA_china_window days = 60 value = 1 } }
				}
				if = {
					limit = { 
						CHI = { #if CHI owns one of these states, they get the event
							OR = {
								controls_state = 608
								controls_state = 597
								controls_state = 614
							}
						}
					}
					CHI = {
						# country_event = china.1
						JAP = {
							add_war_support = 0.05
							create_wargoal = {
								type = annex_everything
								target = CHI
							}
	
							hidden_effect = {
								country_event = { days = 5 id = news.1 }
								ROM = {
									diplomatic_relation = {
										country = JAP
										relation = military_access
										active = yes
									}
								}
						
								BUL = {
									diplomatic_relation = {
										country = JAP
										relation = military_access
										active = yes
									}
								}
							}
							USA = { set_country_flag = { flag = USA_china_window days = 60 value = 1 } }
							if = {
								limit = {
									has_country_leader = { id = 700 ruling_only = yes }
								}
								remove_country_leader_trait = imperial_sanction
							}
						}
					}
				}
				add_named_threat = { threat = 5 name = JAP_intervene_in_china }
				
				if = {
					limit = {
						OR = { 
							JAP = { is_ai = no }
							MAN = { is_ai = no } 
						}
					}
					add_ideas = JAP_intervene_in_china_5
					MAN = { add_ideas = MAN_intervene_in_china_5 }
				}
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = DISABLED
					}
				}
				JAP = {
					transfer_state = 608
					transfer_state = 614
					transfer_state = 597
					transfer_state = 743
					transfer_state = 598
					transfer_state = 613
					transfer_state = 596
					transfer_state = 595
					transfer_state = 593
					transfer_state = 592
					transfer_state = 729
					transfer_state = 594
					transfer_state = 728
					transfer_state = 591
				}
				every_state = {
					limit = {
						OR = {
							state = 608
							state = 614
							state = 597
							state = 743
							state = 598
							state = 613
							state = 596
							state = 595
							state = 593
							state = 592
							state = 729
							state = 594
							state = 728
							state = 591
						}
					}
					add_dynamic_modifier = { modifier = factory_reduction_balancer }
				}
				set_country_flag = JAP_china_war_happening_cooldown
				if = {
					limit = {
						NOT = {
							has_global_flag = china_auto_happend
						}		
					}
					JAP = {
						add_named_threat = { threat = 22.5 name = "Marco Polo Bridge Incident" }
						boot_naval_treaty_f = yes
					}
					hidden_effect = {
						JAP = {
							army_experience = 300
							air_experience = 125
						}
						# USA = {
						# 	add_war_support = 0.1
						# }
						ENG = {
							add_war_support = 0.1
						}
						SOV = {
							add_war_support = 0.1
						}
						AST = {
							add_war_support = 0.1
						}
						SAF = {
							add_war_support = 0.1
						}
						CAN = {
							add_war_support = 0.1
						}
						NZL = {
							add_war_support = 0.1
						}
						RAJ = {
							add_war_support = 0.1
						}
						IRE = {
							add_war_support = 0.1
						}
						FRA = {
							add_war_support = 0.1
						}
						USA = {
							country_event = { id = panay_incident.2 days = 150 } #40 days before
						}
					}
				}
				add_war_support = 0.05
				country_event = { days = 5 id = news.1 }
				USA = { set_country_flag = { flag = USA_china_window days = 60 value = 1 } }
				# take coast and stuff
			}
		}
	}
	
	focus = {
		id = JAP_lessons_of_war
		icon = GFX_JAP_new_tactics
		prerequisite = { focus = JAP_intervene_in_china }
		x = -7
		y = 1
		cost = 5
		relative_position_id = JAP_intervene_in_china

		ai_will_do = {
			factor = 2
		}

		available = {
			has_army_experience > 25
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = JAP_lessons
				cost_reduction = 0.40
				uses = 2
				category = land_doctrine	
			}
			army_experience = -25
		}
	}
	
	focus = {
		id = JAP_infantry_lessons
		icon = GFX_JAP_massed_rifle_production
		prerequisite = { focus = JAP_lessons_of_war }
		x = -3
		y = 1
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_army_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 2
				category = infantry_weapons
			}
			army_experience = -25
		}
	}
	
	focus = {
		id = JAP_artillery_lessons
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = JAP_lessons_of_war }
		x = -2
		y = 2
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_army_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 2
				category = artillery
			}
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 2
				category = rocketry
			}
			army_experience = -25
		}
	}
	
	focus = {
		id = JAP_mech_lessons
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = JAP_lessons_of_war }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_army_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 2
				category = motorized_equipment
			}
			army_experience = -25
		}
	}
	
	focus = {
		id = JAP_tank_lessons
		icon = GFX_JAP_tank
		prerequisite = { focus = JAP_lessons_of_war }
		x = 0
		y = 2
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_army_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 2
				category = armor
			}
			army_experience = -25
			custom_effect_tooltip = JAP_adaptable_armor_designs
			hidden_effect = { set_technology = { adaptable_armor_designs = 1 } }
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = JAP_tank2_prop
		}
	}
	
	focus = {
		id = JAP_doctrine_lessons
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = JAP_lessons_of_war }
		x = 1
		y = 1
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_army_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = JAP_lessons
				cost_reduction = 0.40
				uses = 2
				category = land_doctrine
			}
			army_experience = -25
		}
	}
	
	focus = {
		id = JAP_air_innovations
		icon = GFX_Japanese_Airforce
		prerequisite = { focus = JAP_lessons_of_war }
		x = 2
		y = 2
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_air_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = JAP_lessons
				cost_reduction = 0.40
				uses = 2
				category = air_doctrine
			}
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.75
				uses = 1
				technology = iw_small_airframe
				technology = basic_small_airframe
				technology = improved_small_airframe
				technology = advanced_small_airframe
			}
			air_experience = -25
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = JAP_air2_prop
		}
	}
	
	focus = {
		id = JAP_ground_support
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = JAP_lessons_of_war }
		x = 3
		y = 1
		cost = 5
		relative_position_id = JAP_lessons_of_war

		available = {
			has_air_experience > 25
		}

		cancel_if_invalid = yes

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.50
				uses = 2
				category = medium_air
			}
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.50
				uses = 2
				category = light_air
			}
			air_experience = -25
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = JAP_air2_prop
		}
	}
	
	## Post China War Tree
	focus = {
		id = JAP_secure_china
		icon = GFX_goal_JAP_secure_china
		prerequisite = { focus = JAP_intervene_in_china }
		x = 0
		y = 1
		cost = 1
		relative_position_id = JAP_intervene_in_china
		dynamic = yes

		available = {
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				OR = {
					GER = { has_war_with = ENG }
					CHI = {
						surrender_progress > 0.75
					}
				}
				JAP = { NOT = { has_war_with = ENG } }
				country_exists = CHI
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = DISABLED
					}
				}
				if = {
					limit = {
						has_country_flag = JAP_china_war_happening_cooldown
					}
					has_country_flag = {
						flag = JAP_china_war_happening_cooldown
						days > 396
					}
					custom_trigger_tooltip = {
						tooltip = JAP_china_war_happening_cooldown_tt
						has_country_flag = {
							flag = JAP_china_war_happening_cooldown
							days > 396
						}
					}
				}
				date > 1939.3.1
				country_exists = CHI
			}
		}

		bypass = {
			OR = {
				has_global_flag = HOST_SSJW_END
				if = {
					limit = {
						has_game_rule = {
							rule = china_war_rule
							option = ENABLED
						}
					}
					NOT = { country_exists = CHI }
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = china_war_rule
							option = DISABLED
						}
					}
					always = no
				}
			}
		}

		cancel_if_invalid = yes

		completion_reward = {
			if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = ENABLED
					}
				}
				add_named_threat = { threat = 15 name = JAP_secure_china }		
				USA = { add_war_support = 0.10 }	
				add_timed_idea = { idea = JAP_ichi_go days = 365 }
				hidden_effect = {
					every_army_leader={
						add_trait = {
							trait = twenty_terrain_penalty_reduction
						}
					}
				}
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = china_war_rule
						option = DISABLED
					}
				}
				JAP = {
					add_named_threat = { threat = 50 name = "Republic of China capitulated" }
				}
				CHI = {
					set_equipment_fraction = 0
				}
				annex_country = {
					target = CHI
					transfer_troops = no
				}
				every_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = CHI
						is_on_continent = asia
					}
					set_compliance = 80
				}
				every_state = {
					limit = {
						has_dynamic_modifier = { modifier = factory_reduction_balancer }
					}
					remove_dynamic_modifier = { modifier = factory_reduction_balancer }
				}
				hidden_effect = {
					JAP = {
						army_experience = 550
						air_experience = 225
					}
					USA = {
						army_experience = 125
						air_experience = 75
					}
					SOV = {
						army_experience = 125
						air_experience = 75
					}
					GER = {
						army_experience = 200
						air_experience = 125
					}
					ITA = {
						army_experience = 200
						air_experience = 125
					}
				}
				custom_effect_tooltip = "8 Sino-Japanese War veterans spawn in Tokyo"
				JAP = {
					division_template = {
						name = "Sino-Japanese Veterans"
						division_names_group = JAP_INF_01
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
							
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
	
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
	
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
	
							infantry = { x = 4 y = 0 }
							infantry = { x = 4 y = 1 }
							infantry = { x = 4 y = 2 }
							infantry = { x = 4 y = 3 }
						}
					}
					282 = {
						for_loop_effect = {
							end = 8
							create_unit = {
								division = "division_template = \"Sino-Japanese Veterans\" start_experience_factor = 1"
								owner = JAP
							}
						}
					}
				}
			}
		}
	}	

	focus = {
		id = JAP_early_war_industry_focus
		icon = GFX_goal_JAP_IJA_takeover
		prerequisite = { focus = JAP_secure_china }
		mutually_exclusive = { focus = JAP_mid_war_industry_focus focus = JAP_late_war_industry_focus}
		x = 2
		y = 1
		cost = 3
		relative_position_id = JAP_secure_china

		available = {
			NOT = { has_war_with = CHI }
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			set_country_flag = JAP_early_war
			# JAP_interservice_rivalry_towards_army = yes
			# JAP_interservice_rivalry_towards_army = yes
			add_power_balance_value = {
				id = JAP_interservice_rivalry
				value = -1
			}
			if = {
				limit = {
					date > 1941.1.1
				}
				add_ideas = JAP_early_war_industry_bonus2
				MAN = { add_ideas = JAP_early_war_industry_bonus2 }
				SIA = { add_ideas = JAP_early_war_industry_bonus2 }
			}
			else = {
				add_ideas = JAP_early_war_industry_bonus
				MAN = { add_ideas = JAP_early_war_industry_bonus }
				SIA = { add_ideas = JAP_early_war_industry_bonus }
			}
			custom_effect_tooltip = JAP_early_war_industry_tt
			effect_tooltip = {
				swap_ideas = {
					remove_idea = JAP_early_war_industry_bonus
					add_idea = JAP_early_war_industry_bonus2
				}
			}

			# effect_tooltip = {
			# 	random_state = {
			# 		limit = {
			# 			set_temp_variable = { num_factory = building_level@industrial_complex }
			# 			check_variable = { num_factory > 1 }
			# 			is_fully_controlled_by = JAP
			# 		}
			# 		add_building_construction = {
			# 			type = arms_factory
			# 			level = 1
			# 			instant_build = yes
			# 		}
			# 		remove_building = {
			# 			type = industrial_complex
			# 			level = 2
			# 		}
			# 	}
			# }
			# custom_effect_tooltip = JAP_early_war_start_tt

		}
	}

	focus = {
		id = JAP_mid_war_industry_focus
		icon = GFX_goal_JAP_IJN_takeover
		prerequisite = { focus = JAP_secure_china }
		mutually_exclusive = { focus = JAP_early_war_industry_focus focus = JAP_late_war_industry_focus}
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_secure_china

		available = {
			NOT = { has_war_with = CHI }
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			set_country_flag = JAP_mid_war
			# JAP_interservice_rivalry_towards_navy = yes
			# JAP_interservice_rivalry_towards_navy = yes
			add_power_balance_value = {
				id = JAP_interservice_rivalry
				value = 1
			}
			if = {
				limit = {
					date > 1941.1.1
				}
				add_ideas = JAP_mid_war_industry_bonus2
				MAN = { add_ideas = JAP_mid_war_industry_bonus2 }
				SIA = { add_ideas = JAP_mid_war_industry_bonus2 }
			}
			else = {
				add_ideas = JAP_mid_war_industry_bonus
				MAN = { add_ideas = JAP_mid_war_industry_bonus }
				SIA = { add_ideas = JAP_mid_war_industry_bonus }
			}
			custom_effect_tooltip = JAP_mid_war_start_tt
			effect_tooltip = {
				swap_ideas = {
					remove_idea = JAP_mid_war_industry_bonus
					add_idea = JAP_mid_war_industry_bonus2
				}
			}
		}
	}

	focus = {
		id = JAP_late_war_industry_focus
		icon = GFX_goal_JAP_adaptive_war_industry
		prerequisite = { focus = JAP_secure_china }
		mutually_exclusive = { focus = JAP_early_war_industry_focus focus = JAP_mid_war_industry_focus}
		x = -2
		y = 1
		cost = 3
		relative_position_id = JAP_secure_china

		available = {
			NOT = { has_war_with = CHI }
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			set_country_flag = JAP_late_war
			if = {
				limit = {
					date > 1941.1.1
				}
				add_ideas = JAP_late_war_industry_bonus2
				MAN = { add_ideas = JAP_late_war_industry_bonus2 }
				SIA = { add_ideas = JAP_late_war_industry_bonus2 }
			}
			else = {
				add_ideas = JAP_late_war_industry_bonus
				MAN = { add_ideas = JAP_late_war_industry_bonus }
				SIA = { add_ideas = JAP_late_war_industry_bonus }
			}
			custom_effect_tooltip = JAP_late_war_start_tt
			effect_tooltip = {
				swap_ideas = {
					remove_idea = JAP_late_war_industry_bonus
					add_idea = JAP_late_war_industry_bonus2
				}
			}
		}
	}

	focus = {
		id = JAP_early_war_military_focus
		icon = GFX_goal_JAP_ija_battle_plans
		prerequisite = { focus = JAP_early_war_industry_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_early_war_industry_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			custom_effect_tooltip = JAP_early_war_military_emperor_tt
			custom_effect_tooltip = JAP_early_war_military_tora_tt
			# custom_effect_tooltip = JAP_early_war_military_usa_tt
		}
	}

	focus = {
		id = JAP_early_war_terrain_training_focus
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = JAP_early_war_military_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_early_war_military_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			# add_ideas = JAP_indochina_terrain_training
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_terrain_penalty_reduction = 0.05 tooltip = terrain_penalty_reduction_tt }
			hidden_effect = {
				every_army_leader={
					add_trait = {
     					trait = five_terrain_penalty_reduction
					}
				}
			}
			MAN = {
				add_ideas = JAP_indochina_terrain_training
				hidden_effect = {
					every_army_leader={
						add_trait = {
     						trait = five_terrain_penalty_reduction
						}
					}
				}
			}
			SIA = {
				add_ideas = JAP_indochina_terrain_training
				hidden_effect = {
					every_army_leader={
						add_trait = {
     						trait = five_terrain_penalty_reduction
						}
					}
				}
			}
		}
	}

	focus = {
		id = JAP_mid_war_military_focus
		icon = GFX_goal_JAP_preparing_invasions
		prerequisite = { focus = JAP_mid_war_industry_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_mid_war_industry_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			# add_ideas = JAP_mid_war_military_bonus
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_invasion_preparation = -0.1 tooltip = invasion_preparation_tt }
			add_to_variable = { JAP_japanese_army_naval_invasion_capacity = 10 tooltip = naval_invasion_capacity_tt }
			add_to_variable = { JAP_japanese_army_amphibious_invasion = 0.1 tooltip = amphibious_invasion_tt }
			add_to_variable = { JAP_japanese_army_extra_marine_supply_grace = 72 tooltip = extra_marine_supply_grace_tt }
		}
	}

	focus = {
		id = JAP_mid_war_intel_focus
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = JAP_mid_war_military_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_mid_war_military_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			custom_effect_tooltip = JAP_mid_war_intel_tt
			effect_tooltip = {
				add_intel = {
					target = USA
					civilian_intel = 20
				}
				add_intel = {
					target = USA
					army_intel = 20
				}
				add_intel = {
					target = USA
					navy_intel = 20
				}
				add_intel = {
					target = USA
					airforce_intel = 20
				}
			}
			hidden_effect = {
				JAP = {
					add_operation_token = {
						tag = USA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_navy_japan_small
					}
				}
				MAN = {
					add_operation_token = {
						tag = USA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_navy_japan_small
					}
				}
				SIA = {
					add_operation_token = {
						tag = USA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = USA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = RAJ
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = AST
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = NZL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = ENG
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = SAF
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = CAN
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = MEX
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = BRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = HOL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = IRE
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = POL
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = FRA
						token = token_navy_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_airforce_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_army_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_civilian_japan_small
					}
					add_operation_token = {
						tag = INS
						token = token_navy_japan_small
					}
				}
			}
		}
	}

	focus = {
		id = JAP_late_war_military_focus
		icon = GFX_goal_JAP_reorganized_supply_networks
		prerequisite = { focus = JAP_late_war_industry_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_late_war_industry_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			# add_ideas = JAP_late_war_military_bonus
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_supply_consumption_factor = -0.05 tooltip = supply_consumption_factor_tt }
			add_to_variable = { JAP_japanese_army_no_supply_grace = 48 tooltip = no_supply_grace_tt }
		}
	}

	focus = {
		id = JAP_late_war_intel_focus
		icon = GFX_goal_generic_radar
		prerequisite = { focus = JAP_late_war_military_focus }
		x = 0
		y = 1
		cost = 3
		relative_position_id = JAP_late_war_military_focus

		available = {
		}

		bypass = {
		}

		cancel_if_invalid = yes

		completion_reward = {
			# custom_effect_tooltip = JAP_late_war_intel_tt
			# add_ideas = JAP_late_war_intel
			JAP_economy_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_economy_production_speed_radar_station_factor = 0.25 tooltip = production_speed_radar_station_factor_tt }
			add_tech_bonus = {
				name = USA_naval_radar
				uses = 2
				bonus = 0.75
				category = radar_tech
			}
			# effect_tooltip = {
			# 	add_intel = {
			# 		target = USA
			# 		civilian_intel = 20
			# 	}
			# 	add_intel = {
			# 		target = USA
			# 		army_intel = 20
			# 	}
			# 	add_intel = {
			# 		target = USA
			# 		navy_intel = 20
			# 	}
			# 	add_intel = {
			# 		target = USA
			# 		airforce_intel = 20
			# 	}
			# }
			# hidden_effect = {
			# 	JAP = {
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_navy_japan_big
			# 		}
			# 	}
			# 	MAN = {
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_navy_japan_big
			# 		}
			# 	}
			# 	SIA = {
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = USA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = RAJ
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = AST
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = NZL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = ENG
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = SAF
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = CAN
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = MEX
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = BRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = HOL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = IRE
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = POL
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = FRA
			# 			token = token_navy_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_airforce_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_army_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_civilian_japan_big
			# 		}
			# 		add_operation_token = {
			# 			tag = INS
			# 			token = token_navy_japan_big
			# 		}
			# 	}
			# }
			# custom_effect_tooltip = JAP_late_war_collab_tt
		}
	}

	# focus = {
	# 	id = JAP_late_war_destruction_focus
	# 	icon = GFX_focus_jap_zero
	# 	prerequisite = { focus = JAP_late_war_intel_focus }
	# 	x = 0
	# 	y = 1
	# 	cost = 4
	# 	relative_position_id = JAP_late_war_intel_focus

	# 	available = {
	# 	}

	# 	bypass = {
	# 	}

	# 	cancel_if_invalid = yes

	# 	completion_reward = {
	# 		custom_effect_tooltip = JAP_late_war_destruction_tt
	# 		effect_tooltip = {
	# 			638 = {
	# 				damage_building = {
	# 					type = bunker
	# 					damage = 2
	# 				}
	# 				damage_building = {
	# 					type = coastal_bunker
	# 					damage = 2
	# 				}
	# 				damage_building = {
	# 					type = air_base
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = anti_air_building
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = radar_station
	# 					damage = 1
	# 				}
	# 			}
	# 			632 = {
	# 				damage_building = {
	# 					type = bunker
	# 					damage = 2
	# 				}
	# 				damage_building = {
	# 					type = coastal_bunker
	# 					damage = 2
	# 				}
	# 				damage_building = {
	# 					type = air_base
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = anti_air_building
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = radar_station
	# 					damage = 1
	# 				}
	# 			}
	# 			every_state = {
	# 				limit = {
	# 					OR = {
	# 						state = 627
	# 						state = 628
	# 						state = 625
	# 						state = 624
	# 						state = 626
	# 						state = 327
	# 						state = 623
	# 						is_core_of = INS
	# 						is_core_of = MAL
	# 					}
	# 				}
	# 				damage_building = {
	# 					type = bunker
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = coastal_bunker
	# 					damage = 1
	# 				}
	# 				damage_building = {
	# 					type = air_base
	# 					damage = 1
	# 				}
	# 			}
	# 		}
	# 	}
	# }


	focus = {
		id = JAP_strike_south_doctrine
		icon = GFX_focus_jap_strike_south
		prerequisite = { focus = JAP_intervene_in_china }
		x = 9
		y = 1
		cost = 20
		relative_position_id = JAP_intervene_in_china
		
		select_effect = {
			set_country_flag = JAP_strike_south
		}

		available = {
			OR = {
				CHI = {
					surrender_progress > 0.5
				}
				CHI = { has_capitulated = yes }
				CHI = { is_subject_of = JAP }
				NOT = { country_exists = CHI }
				GER = { has_war_with = ENG }
			}
		}

		completion_reward = {
			# custom_effect_tooltip = JAP_strike_south_tt
			unlock_decision_tooltip = JAP_pressure_france
		}
	}
	
	focus = {
		id = JAP_pressure_siam
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_befriend_siam }
		x = -5
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			SIA = {
				is_ai = yes
			}
			# has_country_flag = JAP_siam1
		}

		completion_reward = {
			# SIA = { country_event = japan.12 }
			JAP = {
				SIA = {
					pow_before_annex = yes
				}
			}
			annex_country = {
				target = SIA
				transfer_troops = no
			}
			
			every_controlled_state = {
				limit = {
					is_core_of = SIA
				}
				add_compliance = 100
			}
		}
	}
	
	focus = {
		id = JAP_befriend_siam 
		icon = GFX_goal_JAP_alliance_with_siam
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_pressure_siam }
		x = -3
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			# has_country_flag = JAP_siam2
		}

		bypass = {
			# has_country_flag = JAP_siam2
			# is_in_faction_with = SIA
			# SIA = {
			# 	is_ai = no
			# }
		}

		completion_reward = {
			# SIA = { country_event = generic.5 }
			add_ideas = JAP_SIA_trade
			SIA = { add_ideas = SIA_JAP_trade }
			SIA = { add_offsite_building = { type = industrial_complex level = 2 } }
			add_ai_strategy = {
				type = protect
				id = "SIA"
				value = 100
			}
		}
	}
	
	focus = {
		id = JAP_expand_army
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_expand_marines }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			# has_country_flag = JAP_army1
		}

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.50
				uses = 2
				category = infantry_weapons
			}
			# add_potential_special_forces_tree = yes
			# add_ideas = JAP_expand_the_army
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_training_time_army_factor = -0.3 tooltip = training_time_army_factor_tt }
		}
	}
	
	focus = {
		id = JAP_expand_marines
		icon = GFX_goal_generic_amphibious_assault
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_expand_army }
		x = 1
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			# has_country_flag = JAP_army2
		}

		completion_reward = {
			add_tech_bonus = {
				name = JAP_lessons
				bonus = 0.50
				uses = 2
				category = marine_tech
				category = tp_tech
			}
			# add_potential_special_forces_tree = yes
			# add_ideas = JAP_expand_the_snlf
			JAP_army_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_army_special_forces_cap = 0.05 tooltip = special_forces_cap_tt }
		}
	}
	
	focus = {
		id = JAP_build_up_china
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_build_up_islands }
		x = 3
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			# has_country_flag = JAP_buildup1
		}

		completion_reward = {
			289 = {
				add_building_construction = {
					type = naval_base
					level = 5
					province = 7408
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 5
					instant_build = yes
				}
			}
			724 = {
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_build_up_islands
		icon = GFX_focus_generic_coastal_fort
		prerequisite = { focus = JAP_strike_south_doctrine }
		mutually_exclusive = { focus = JAP_build_up_china }
		x = 5
		y = 1
		cost = 5
		relative_position_id = JAP_strike_south_doctrine

		available = {
			# has_country_flag = JAP_buildup2
		}

		completion_reward = {
			645 = {
				add_building_construction = {
					type = naval_base
					level = 4
					province = 13025
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker 
					level = 2
					province = 13025
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			526 = {
				add_building_construction = {
					type = naval_base
					level = 3
					province = 11932
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker 
					level = 3
					province = 11932
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			646 = {
				add_building_construction = {
					type = naval_base
					level = 4
					province = 3995
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker 
					level = 3
					province = 3995
					instant_build = yes
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_strike_the_west
		icon = GFX_focus_generic_strike_at_democracy3
		prerequisite = { focus = JAP_build_up_islands focus = JAP_build_up_china }
		prerequisite = { focus = JAP_befriend_siam focus = JAP_pressure_siam }
		prerequisite = { focus = JAP_expand_army focus = JAP_expand_marines }
		prerequisite = { focus = JAP_late_war_intel_focus focus = JAP_mid_war_intel_focus focus = JAP_early_war_terrain_training_focus }
		will_lead_to_war_with = ENG
		x = 0
		y = 4
		cost = 2
		relative_position_id = JAP_strike_south_doctrine

		available = {
			NOT = { has_war_with = CHI }
			if = {
				limit = {
					has_game_rule = {
						rule = japan_strike_the_west
						option = JANUARY_1_1941
					}
				}
				date > 1941.1.1
			}
			if = {
				limit = {
					has_game_rule = {
						rule = japan_strike_the_west
						option = SEPTEMBER_1_1940
					}
				}
				date > 1940.9.1
			}
			if = {
				limit = {
					has_game_rule = {
						rule = japan_strike_the_west
						option = JUNE_1_1940
					}
				}
				date > 1940.6.1
			}
		}

		completion_reward = {
			add_advisor_role = {
				character = JAP_kanin_kotohito
				activate = yes
				advisor = {
					slot = army_chief
					cost = 150
					idea_token = JAP_character_token_offense_genius
					traits = {
						army_chief_offensive_3
					}
				}
			}
			declare_war_on = {
				target = ENG
				type = annex_everything
			}
			ENG = {
				declare_war_on_enemy_faction = yes
			}
			declare_war_on = {
				target = AST
				type = annex_everything
			}
			if = {
				limit = {
					NZL = { exists = yes }
				}
				declare_war_on = {
					target = NZL
					type = annex_everything
				}
			}
			declare_war_on = {
				target = RAJ
				type = annex_everything
			}
			declare_war_on = {
				target = SAF
				type = annex_everything
			}
			# declare_war_on = {
			# 	target = MAL
			# 	type = annex_everything
			# }
			if = {
				limit = {
					INS = { exists = yes }
				}
				declare_war_on = {
					target = INS
					type = annex_everything
				}
			}
			random_country = { 
				limit = { original_tag = HOL  has_government = democratic}
				JAP = {
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}	
			}
			declare_war_on = {
				target = FRA
				type = annex_everything
			}
			declare_war_on = {
				target = CAN
				type = annex_everything
			}
			declare_war_on = {
				target = USA
				type = annex_everything
			}
			hidden_effect = {
				MAN = {
					declare_war_on = {
						target = ENG
						type = annex_everything
					}
					declare_war_on = {
						target = AST
						type = annex_everything
					}
					if = {
						limit = {
							NZL = { exists = yes }
						}
						declare_war_on = {
							target = NZL
							type = annex_everything
						}
					}
					declare_war_on = {
						target = RAJ
						type = annex_everything
					}
					declare_war_on = {
						target = SAF
						type = annex_everything
					}
					# declare_war_on = {
					# 	target = MAL
					# 	type = annex_everything
					# }
					if = {
						limit = {
							INS = { exists = yes }
						}
						declare_war_on = {
							target = INS
							type = annex_everything
						}
					}
					random_country = { 
						limit = { original_tag = HOL  has_government = democratic}
						JAP = {
							declare_war_on = {
								target = PREV
								type = annex_everything
							}
						}	
					}
					declare_war_on = {
						target = FRA
						type = annex_everything
					}
					declare_war_on = {
						target = CAN
						type = annex_everything
					}
				}
				SIA = {
					declare_war_on = {
						target = ENG
						type = annex_everything
					}
					declare_war_on = {
						target = AST
						type = annex_everything
					}
					if = {
						limit = {
							NZL = { exists = yes }
						}
						declare_war_on = {
							target = NZL
							type = annex_everything
						}
					}
					declare_war_on = {
						target = RAJ
						type = annex_everything
					}
					declare_war_on = {
						target = SAF
						type = annex_everything
					}
					# declare_war_on = {
					# 	target = MAL
					# 	type = annex_everything
					# }
					if = {
						limit = {
							INS = { exists = yes }
						}
						declare_war_on = {
							target = INS
							type = annex_everything
						}
					}
					random_country = { 
						limit = { original_tag = HOL  has_government = democratic}
						JAP = {
							declare_war_on = {
								target = PREV
								type = annex_everything
							}
						}	
					}
					declare_war_on = {
						target = FRA
						type = annex_everything
					}
					declare_war_on = {
						target = CAN
						type = annex_everything
					}
				}
				# USA
				MAN = {
					declare_war_on = {
						target = USA
						type = annex_everything
					}
				}
				SIA = {
					declare_war_on = {
						target = USA
						type = annex_everything
					}
				}
				if = {
					limit = {
						has_country_flag = JAP_early_war
					}
					add_timed_idea = { idea = JAP_tora_tora_tora_idea days = 120 }
				}
				else = {
					add_timed_idea = { idea = JAP_tora_tora_tora_idea days = 180 }
				}
			
				GER = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				ITA = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				ROM = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				HUN = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				BUL = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				SPR = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				VIC = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				YUG = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				CAN = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				SAF = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				AST = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				ENG = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				NZL = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				IRE = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				MEX = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				BRA = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				SPR = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				RAJ = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				HOL = { remove_ideas = GER_africa_hp set_technology = { africa_hp_off = 1 popup = no } }
				hidden_effect = {
					GER = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					ITA = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					ROM = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					HUN = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					BUL = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					SPR = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					VIC = { remove_ideas = GER_africaaaaaaaaaaaaaa }
					YUG = { remove_ideas = GER_africaaaaaaaaaaaaaa }
				}
			}
			# custom_effect_tooltip = JAP_strike_west_tt
			add_timed_idea = { idea = for_the_emperor_idea days = 120 }
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			# unlock_decision_tooltip = JAP_strike_prop
		}
	}
	
	focus = {
		id = JAP_island_defences
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = JAP_strike_the_west }
		x = -1
		y = 1
		relative_position_id = JAP_strike_the_west

		cost = 5

		available = {
			OR = {
				has_idea = JAP_island_hopping4
				has_idea = JAP_island_hopping5
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 645
				}
				645 = {
					add_dynamic_modifier = { modifier = island_defences }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 647
				}
				647 = {
					add_dynamic_modifier = { modifier = island_defences }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 526
				}
				526 = {
					add_dynamic_modifier = { modifier = island_defences }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 646
				}
				646 = {
					add_dynamic_modifier = { modifier = island_defences }
				}
			}
		}
	}

	focus = {
		id = JAP_oceanic_collaborators
		icon = GFX_goal_JAP_oceanic_collab
		prerequisite = { focus = JAP_strike_the_west }
		x = 1
		y = 1
		relative_position_id = JAP_strike_the_west

		cost = 5

		available = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			if = { # singapore
				limit = {
					336 = { is_controlled_by = JAP }
				}
				336 = {
					add_compliance = 10
				}
			}
			if = { # palembang
				limit = {
					672 = { is_controlled_by = JAP }
				}
				672 = {
					add_compliance = 10
				}
			}
			if = { # batavia
				limit = {
					335 = { is_controlled_by = JAP }
				}
				335 = {
					add_compliance = 10
				}
				667 = {
					add_compliance = 10
				}
			}
			if = { # brunei
				limit = {
					333 = { is_controlled_by = JAP }
				}
				333 = {
					add_compliance = 10
				}
			}
			if = { # balikpapan
				limit = {
					334 = { is_controlled_by = JAP }
				}
				334 = {
					add_compliance = 10
				}
			}
			if = { # makassar
				limit = {
					673 = { is_controlled_by = JAP }
				}
				673 = {
					add_compliance = 10
				}
				668 = {
					add_compliance = 10
				}
			}
			if = { # manila
				limit = {
					327 = { is_controlled_by = JAP }
				}
				327 = {
					add_compliance = 10
				}
				623 = {
					add_compliance = 10
				}
				624 = {
					add_compliance = 10
				}
				625 = {
					add_compliance = 10
				}
				628 = {
					add_compliance = 10
				}
				627 = {
					add_compliance = 10
				}
				626 = {
					add_compliance = 10
				}
			}
			if = { # port moresby
				limit = {
					523 = { is_controlled_by = JAP }
				}
				523 = {
					add_compliance = 10
				}
				669 = {
					add_compliance = 10
				}
				738 = {
					add_compliance = 10
				}
				737 = {
					add_compliance = 10
				}
				634 = {
					add_compliance = 10
				}
			}
			custom_effect_tooltip = oceanic_collaborators_tt
		}
	}

	focus = {
		id = JAP_warrior_spirit
		icon = GFX_goal_JAP_WAY
		prerequisite = { focus = JAP_strike_the_west }
		x = 3
		y = 1
		relative_position_id = JAP_strike_the_west

		cost = 5

		available = {
			OR = {
				surrender_progress > 0.05
				has_idea = JAP_island_hopping4
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			hidden_effect = {
				set_rule = {
					can_use_kamikaze_pilots = yes
				}
			}
			custom_effect_tooltip = kamikaze_focus_tooltip
		}
	}
	
	focus = {
		id = JAP_strengthen_the_divine_wind
		icon = GFX_goal_generic_secret_weapon
		prerequisite = { focus = JAP_warrior_spirit }
		x = 0
		y = 1
		relative_position_id = JAP_warrior_spirit

		cost = 5

		available = {
			has_tech = rocket_engines
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = JAP_strengthen_the_divine_wind_effect
			hidden_effect = { set_technology = { suicide_craft = 1 } }
		}
	}
	
	focus = {
		id = JAP_guide_the_zaibatsus
		icon = GFX_JAP_zaibatsus_dominance
		mutually_exclusive = { focus = JAP_challenge_the_zaibatsus }
		x = 19
		y = 0

		cost = 5

		available = {
			has_completed_focus = JAP_arrest_the_traitors
		}

		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			# swap_ideas = {
			# 	remove_idea = JAP_zaibatsus
			# 	add_idea = JAP_guide_the_zaibatsus
			# }
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_industrial_capacity_factory = 0.05 tooltip = industrial_capacity_factory_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_industrial_complex_factor = 0.05 tooltip = production_speed_industrial_complex_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = 0.05 tooltip = production_speed_dockyard_factor_tt }
		}
	}
	
	focus = {
		id = JAP_expand_the_big_four
		icon = GFX_JAP_unrestricted_zaibatsu_practices #GFX_focus_generic_self_management
		prerequisite = { focus = JAP_guide_the_zaibatsus }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_guide_the_zaibatsus

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_yasuda
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = JAP_expand_the_big_four }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_expand_the_big_four

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = industrial_complex
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_bank_loans
		icon = GFX_JAP_private_industry_subsidies #GFX_focus_mex_privatisation
		prerequisite = { focus = JAP_yasuda }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_yasuda

		available = {
		}

		completion_reward = {
			# swap_ideas = {
			# 	add_idea = JAP_guide_the_zaibatsus2
			# 	remove_idea = JAP_guide_the_zaibatsus
			# }
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.10 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_global_building_slots_factor = 0.1 tooltip = global_building_slots_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.05 tooltip = production_speed_arms_factory_factor_tt }
		}
	}
	
	focus = {
		id = JAP_sumitomo
		icon = GFX_focus_generic_steel
		prerequisite = { focus = JAP_expand_the_big_four }
		x = 1
		y = 1
		cost = 5
		relative_position_id = JAP_expand_the_big_four

		available = {
		}

		completion_reward = {
			535 = {
				add_resource = {
					type = steel
					amount = 500
				}
				add_resource = {
					type = aluminium
					amount = 300
				}
			}
		}
	}
	
	focus = {
		id = JAP_mining_expansion
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = JAP_sumitomo }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_sumitomo

		available = {
		}

		completion_reward = {
			# add_ideas = YUG_idea_expanded_mining_industry 
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_local_resources_factor = 0.10 tooltip = local_resources_factor_tt }
		}
	}
	
	focus = {
		id = JAP_promote_rivalry
		icon = GFX_goal_tripartite_pact
		prerequisite = { focus = JAP_mining_expansion }
		prerequisite = { focus = JAP_bank_loans }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_mining_expansion

		available = {
		}

		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = JAP_mitsui
		icon = GFX_goal_generic_build_navy
		prerequisite = { focus = JAP_promote_rivalry }
		x = 1
		y = 1
		cost = 5
		relative_position_id = JAP_promote_rivalry

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_mitsui_dockyards
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = JAP_mitsui }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_mitsui

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_mitsubishi_deal
		icon = GFX_JAP_imperial_arsenals_upgrade #GFX_goal_generic_dangerous_deal
		prerequisite = { focus = JAP_promote_rivalry }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_promote_rivalry

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = arms_factory
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_mitsubishi_factories
		icon = GFX_JAP_expand_military_factories
		prerequisite = { focus = JAP_mitsubishi_deal }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_mitsubishi_deal

		available = {
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = arms_factory
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
		}
	}


	
	focus = {
		id = JAP_challenge_the_zaibatsus
		icon = GFX_focus_jap_zaibatsu
		mutually_exclusive = { focus = JAP_guide_the_zaibatsus }
		x = 25
		y = 0

		cost = 5

		available = {
			has_completed_focus = JAP_support_the_kodoha_faction
		}

		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			# swap_ideas = {
			# 	remove_idea = JAP_zaibatsus
			# 	add_idea = JAP_zaibatsus_challenged
			# }
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.01 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_political_power_cost = -0.25 tooltip = political_power_cost_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = -0.1 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.25 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.25 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_industrial_complex_factor = -0.1 tooltip = production_speed_industrial_complex_factor_tt }
		}
	}
	
	focus = {
		id = JAP_break_up_big_four
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = JAP_challenge_the_zaibatsus }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_challenge_the_zaibatsus

		available = {
		}

		completion_reward = {
			add_political_power = 200
		}
	}	

	focus = {
		id = JAP_imperial_economy
		icon = GFX_goal_JAP_yen
		prerequisite = { focus = JAP_break_up_big_four }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_break_up_big_four

		available = {
		}

		completion_reward = {
			add_research_slot = 1
			# swap_ideas = {
			# 	add_idea = JAP_zaibatsus_challenged3
			# 	remove_idea = JAP_zaibatsus_challenged
			# }
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.05 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = 0.09 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.05 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.05 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = -0.06 tooltip = production_speed_arms_factory_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = -0.06 tooltip = production_speed_dockyard_factor_tt }
		}
	}
	
	focus = {
		id = JAP_break_yasuda
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = JAP_imperial_economy }
		x = -3
		y = 1
		cost = 5
		relative_position_id = JAP_imperial_economy

		available = {
		}

		completion_reward = {
			add_timed_idea = { idea = JAP_break_yasuda_idea days = 730 }
		}
	}
	
	focus = {
		id = JAP_imperial_bank
		icon = GFX_focus_usa_reestablish_the_gold_standard
		prerequisite = { focus = JAP_break_yasuda }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_break_yasuda

		available = {
		}

		completion_reward = {
			# JAP_emperors_economy_upgrade = yes
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.025 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = -0.01 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.05 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.05 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.04 tooltip = production_speed_arms_factory_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = 0.04 tooltip = production_speed_dockyard_factor_tt }
		}
	}
	
	focus = {
		id = JAP_break_sumitomo
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = JAP_imperial_economy }
		x = -1
		y = 1
		cost = 5
		relative_position_id = JAP_imperial_economy

		available = {
		}

		completion_reward = {
			add_timed_idea = { idea = JAP_break_sumitomo_idea days = 730 }
		}
	}
	
	focus = {
		id = JAP_imperial_mines
		icon = GFX_focus_generic_aluminum
		prerequisite = { focus = JAP_break_sumitomo }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_break_sumitomo

		available = {
		}

		completion_reward = {
			# JAP_emperors_economy_upgrade = yes
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.025 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = -0.01 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.05 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.05 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.04 tooltip = production_speed_arms_factory_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = 0.04 tooltip = production_speed_dockyard_factor_tt }
			528 = {
				add_resource = {
					type = aluminium
					amount = 400
				}
				add_resource = {
					type = chromium
					amount = 400
				}
			}
		}
	}
	
	focus = {
		id = JAP_break_mitsui
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = JAP_imperial_economy }
		x = 1
		y = 1
		cost = 5
		relative_position_id = JAP_imperial_economy

		available = {
		}

		completion_reward = {
			add_timed_idea = { idea = JAP_break_mitsui_idea days = 500 }
		}
	}
	
	focus = {
		id = JAP_imperial_dockyards
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = JAP_break_mitsui }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_break_mitsui

		available = {
		}

		completion_reward = {
			# JAP_emperors_economy_upgrade = yes
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.025 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = -0.01 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.05 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.05 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.04 tooltip = production_speed_arms_factory_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = 0.04 tooltip = production_speed_dockyard_factor_tt }
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 8
				add_building_construction = {
					type = dockyard
					level = 8
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = JAP_break_mitsubishi
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = JAP_imperial_economy }
		x = 3
		y = 1
		cost = 5
		relative_position_id = JAP_imperial_economy

		available = {
		}

		completion_reward = {
			add_timed_idea = { idea = JAP_break_mitsubishi_idea days = 500 }
		}
	}
	
	focus = {
		id = JAP_imperial_factories
		icon = GFX_JAP_imperial_arsenals #GFX_focus_secret_rearmament
		prerequisite = { focus = JAP_break_mitsubishi }
		x = 0
		y = 1
		cost = 5
		relative_position_id = JAP_break_mitsubishi

		available = {
		}

		completion_reward = {
			# JAP_emperors_economy_upgrade = yes
			JAP_economy_dynamic_modifier_tt = yes #tooltip
			add_to_variable = { JAP_japanese_economy_consumer_goods_factor = -0.025 tooltip = consumer_goods_factor_tt }
			add_to_variable = { JAP_japanese_economy_stability_factor = -0.01 tooltip = stability_factor_tt }
			add_to_variable = { JAP_japanese_economy_trade_laws_cost_factor = -0.05 tooltip = trade_laws_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_economy_cost_factor = -0.05 tooltip = economy_cost_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_arms_factory_factor = 0.04 tooltip = production_speed_arms_factory_factor_tt }
			add_to_variable = { JAP_japanese_economy_production_speed_dockyard_factor = 0.04 tooltip = production_speed_dockyard_factor_tt }
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = arms_factory
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 8
				add_building_construction = {
					type = arms_factory
					level = 8
					instant_build = yes
				}
			}
		}
	}


	focus = {
		id = JAP_expand_the_showa_steel_works
		icon = GFX_JAP_development
		x = 16
		y = 0

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {
			716 = { is_fully_controlled_by = MAN }
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			716 = {
				add_resource = {
					type = steel
					amount = 560
				}				
			}
		}
	}

	focus = {
		id = JAP_develop_aluminum_sources
		icon = GFX_goal_generic_construction
		prerequisite = { focus = JAP_expand_the_showa_steel_works }
		x = 0
		y = 1
		relative_position_id = JAP_expand_the_showa_steel_works

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {
			328 = { is_fully_controlled_by = MAN }
			MAN = { is_subject_of = ROOT }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			328 = {
				add_resource = {
					type = aluminium
					amount = 420
				}
			}
		}
	}

	focus = {
		id = JAP_light_industry_development
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = JAP_develop_aluminum_sources }
		x = 0
		y = 1
		relative_position_id = JAP_develop_aluminum_sources

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 715
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			715 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_heavy_industry_development
		icon = GFX_goal_generic_build_tank
		prerequisite = { focus = JAP_light_industry_development }
		x = 0
		y = 1
		relative_position_id = JAP_light_industry_development

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {
			MAN = {
				is_subject_of = ROOT
				has_full_control_of_state = 716				
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			716 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = arms_factory
					level = 4
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_new_naval_estimates
		icon = GFX_goal_JAP_new_naval_estimates
		x = 33
		y = 0

		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = JAP_purge_the_kodoha_faction
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = JAP_new_naval_estimates_DY1
				}
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = JAP_new_naval_estimates_DY2
				}
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		}

		completion_reward = {
			if = {
				limit = {
					not = { has_dlc = "Man the Guns" }
				}
				add_tech_bonus = {
					name = JAP_supremacy_of_the_battlefleet
					bonus = 0.5
					uses = 1
					category = shbb_tech	
				}
			}
			else = {
				navy_experience = 50
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = JAP_new_naval_estimates_DY1
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}				
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = JAP_new_naval_estimates_DY2
			}
		}
	}
	
	focus = {
		id = JAP_new_shipyards
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = JAP_new_naval_estimates }
		x = 0
		y = 1
		relative_position_id = JAP_new_naval_estimates

		cost = 5

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}				
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = dockyard
					level = 4
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT	
					not = {
						OR = {
							state = 646
							state = 645
							state = 555
						}
					}				
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = dockyard
					level = 4
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = JAP_carrier_warfare_experiments
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = JAP_new_shipyards }
		x = -3
		y = 1
		relative_position_id = JAP_new_shipyards

		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = JAP_purge_the_kodoha_faction
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = JAP_carrier_warfare_experiments
				cost_reduction = 0.25
				uses = 2
				category = cat_base_strike
			}
			add_tech_bonus = {
				name = JAP_carrier_warfare_experiments
				bonus = 0.75
				uses = 1
				category = cv_tech
			}
		}
	}

	focus = {
		id = JAP_first_air_fleet
		icon = GFX_JAP_shokaku_class
		prerequisite = { focus = JAP_carrier_warfare_experiments }
		x = 0
		y = 2
		relative_position_id = JAP_carrier_warfare_experiments

		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = JAP_purge_the_kodoha_faction
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			# add_ideas = JAP_first_air_fleet
			JAP_navy_and_air_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_navy_air_forces_sortie_efficiency = 0.2 tooltip = sortie_efficiency_tt }
			add_tech_bonus = {
				name = JAP_carrier_warfare_experiments
				bonus = 1
				uses = 1
				category = cv_tech
			}
		}
	}

	focus = {
		id = JAP_modern_escorts
		icon = GFX_focus_generic_destroyer
		prerequisite = { focus = JAP_carrier_warfare_experiments focus = JAP_supremacy_of_the_battlefleet }
		x = 1
		y = 1
		relative_position_id = JAP_carrier_warfare_experiments

		cost = 5

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_modern_escorts
				bonus = 0.75
				uses = 2
				category = dd_tech	
			}
			add_tech_bonus = {
				name = JAP_modern_escorts
				bonus = 0.75
				uses = 2
				category = asw_tech	
			}
		}
	}
	
	focus = {
		id = JAP_modern_subs
		icon = GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = JAP_carrier_warfare_experiments focus = JAP_supremacy_of_the_battlefleet }
		x = 3
		y = 1
		relative_position_id = JAP_carrier_warfare_experiments

		cost = 5

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_modern_escorts
				bonus = 0.5
				uses = 2
				category = ss_tech	
			}
			add_doctrine_cost_reduction = {
				name = JAP_modern_escorts
				cost_reduction = 0.25
				uses = 2
				category = submarine_doctrine	
			}
		}
	}
	
	focus = {
		id = JAP_cruiser_modernization
		icon = GFX_goal_generic_navy_cruiser
		prerequisite = { focus = JAP_carrier_warfare_experiments focus = JAP_supremacy_of_the_battlefleet }
		x = 5
		y = 1
		relative_position_id = JAP_carrier_warfare_experiments

		cost = 5

		ai_will_do = {
			factor = 1
		}

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_cruiser_modernization
				bonus = 1
				uses = 2
				category = cl_tech	
				category = ca_tech	
			}
		}
	}	

	focus = {
		id = JAP_asw_train
		icon = GFX_goal_generic_occupy_states_coastal
		prerequisite = { focus = JAP_cruiser_modernization focus = JAP_modern_subs focus = JAP_modern_escorts}
		x = 1
		y = 1
		relative_position_id = JAP_modern_escorts

		cost = 10

		completion_reward = {
			# add_ideas = JAP_asw_training
			JAP_navy_and_air_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_navy_air_forces_navy_submarine_detection_factor = 0.1 tooltip = navy_submarine_detection_factor_tt }
			add_to_variable = { JAP_japanese_navy_air_forces_convoy_escort_efficiency = 0.2 tooltip = convoy_escort_efficiency_tt }
		}
	}
	
	focus = {
		id = JAP_long_lance_torpedoes
		icon = GFX_goal_generic_occupy_start_war
		prerequisite = { focus = JAP_cruiser_modernization focus = JAP_modern_subs focus = JAP_modern_escorts}
		x = 1
		y = 1
		relative_position_id = JAP_modern_subs

		cost = 5

		completion_reward = {
			# add_ideas = the_long_lance
			JAP_navy_and_air_dynamic_modifier_tt = yes # tooltip
			add_to_variable = { JAP_japanese_navy_air_forces_naval_torpedo_screen_penetration_factor = 0.25 tooltip = naval_torpedo_screen_penetration_factor_tt }
		}
	}
	

	focus = {
		id = JAP_supremacy_of_the_battlefleet
		icon = GFX_Japanese_Fleet
		prerequisite = { focus = JAP_new_shipyards }
		x = 3
		y = 1
		relative_position_id = JAP_new_shipyards

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_supremacy_of_the_battlefleet
				bonus = 0.5
				uses = 2
				category = bb_tech
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}	
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = JAP_kure_naval_arsenal_organization
				mio:JAP_kure_naval_arsenal_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = kure_naval_arsenal
			}
		}
	}
	
	focus = {
		id = JAP_escort_carriers
		icon = GFX_JAP_air_interdiction
		prerequisite = { focus = JAP_supremacy_of_the_battlefleet }
		x = 0
		y = 2
		relative_position_id = JAP_supremacy_of_the_battlefleet

		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = JAP_purge_the_kodoha_faction
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_tech_bonus = {
				name = JAP_escort
				bonus = 0.5
				uses = 1
				category = cv_tech		
			}
		}
	}
	
	focus = {
		id = JAP_the_zero
		icon = GFX_focus_jap_zero
		prerequisite = { focus = JAP_first_air_fleet focus = JAP_escort_carriers }
		x = 0
		y = 2
		relative_position_id = JAP_modern_subs

		cost = 5
		
		bypass = {
			has_tech = improved_small_airframe	
		}

		available = {
			has_completed_focus = JAP_intervene_in_china
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_zero
				bonus = 1
				ahead_reduction = 1.0
				uses = 1
				technology = improved_small_airframe					
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}	
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = JAP_mitsubishi_organization
				mio:JAP_mitsubishi_organization = {
					add_mio_funds = 1500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = mitsubishi
			}
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = JAP_air2_prop
		}
	}

	focus = {
		id = JAP_bomber_modernization
		icon = GFX_goal_JAP_bomber2
		prerequisite = { focus = JAP_the_zero }
		x = 1
		y = 1
		relative_position_id = JAP_the_zero

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_bomber_modernization
				bonus = 0.5
				uses = 2
				category = tactical_bomber	
			}
			add_tech_bonus = {
				name = JAP_bomber_modernization
				bonus = 0.75
				ahead_reduction = 1.0
				uses = 1
				technology = improved_medium_airframe		
				technology = advanced_medium_airframe	
				technology = modern_medium_airframe	
			}
		}
	}

	focus = {
		id = JAP_fleet_air_arm
		icon = GFX_goal_generic_air_fighter2
		prerequisite = { focus = JAP_the_zero }
		x = -1
		y = 1
		relative_position_id = JAP_the_zero

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = JAP_strategic_bomber_effort
				bonus = 0.5
				uses = 2
				technology = advanced_small_airframe
				technology = modern_small_airframe
			}
		}
	}

	focus = {
		id = JAP_unified_fighter_development
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = JAP_the_zero }
		x = 0
		y = 2
		relative_position_id = JAP_the_zero

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {
			has_completed_focus = JAP_air_innovations
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			hidden_effect = {
				remove_ideas = JAP_duplicate_research_efforts
			}
			JAP_navy_and_air_dynamic_modifier_tt = yes # tooltip
			custom_effect_tooltip = JAP_duplicate_research_effort_10_tt
		}
	}

	focus = {
		id = JAP_war_with_SOV
		icon = GFX_goal_JAP_the_unthinkable_option
		prerequisite = { focus = JAP_strike_the_west }
		x = -3
		y = 1
		relative_position_id = JAP_strike_the_west

		cost = 5

		# allow_branch = {
		# 	has_game_rule = {
		# 		rule = ussr_war_focus_only
		# 		option = ENABLED
		# 	}
		# }

		ai_will_do = {
			factor = 0
		}

		available = {
			# singapore
			336 = { controller = { is_in_faction_with = JAP } }
			# india
			RAJ = { has_capitulated = yes }
			# australia
			AST = { has_capitulated = yes }
			# new zealand
			284 = { controller = { is_in_faction_with = JAP } } # north island
			723 = { controller = { is_in_faction_with = JAP } } # south island
			# philipphines
			327 = { controller = { is_in_faction_with = JAP } } # manila
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			create_wargoal = {
				target = SOV
				type = annex_everything
			}
		}
	}

}
